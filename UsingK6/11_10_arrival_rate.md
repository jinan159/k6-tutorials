# Arrival rate

## Closed Model

- 폐쇄형 모델에서는 이전 반복이 완료될 때까지 다음 반복이 시작되지 않으므로 각 반복의 실행 시간은 테스트에서 실행된 실제 반복 횟수를 나타낸다. 

- v0.27.0 이전에는 k6이 새로운 VU도착 시뮬레이션을 위한 폐쇄형 모델만 지원했다. 
- 이 폐쇄형 모델에서 새로운 VU반복은 VU의 이전 반복이 실행을 완료한 경우에만 시작된다. 
- 따라서 폐쇄형 모델에서 새 VU반복의 시작 속도 또는 도착 속도는 반복 기간(즉, 기본적으로 내보내기 기본기능인 VU의 exec함수의 시작에서 종료까지의 시간)과 밀접하게 연결된다. 

```js
import http from 'k6/http';

export const options = {
  scenarios: {
    closed_model: {
      executor: 'constant-vus',
      vus: 1,
      duration: '1m',
    },
  },
};

export default function () {
  // 다음 요청을 완료하는 데 약 6초가 소요되며, 
  // 결과적으로 6초의 반복 지속 시간이 발생한다. 

  // 결과적으로 New VU반복은 6초당 1의 비율로 시작된다. 
  // 1분 테스트 기간에 대해 총 10번 반복을 완료할 것을 예상할 수 있다. 

  http.get('http://httpbin.test.k6.io/delay/6');
}

```

- 이 스크립트를 실행하면 다음과 같은 결과가 나타난다. 

```js

running (1m01.5s), 0/1 VUs, 10 complete and 0 interrupted iterations
closed_model ✓ [======================================] 1 VUs  1m0s

```

## Drawbacks of using the closed model

- VU 반복 기간과 새로운 VU반복 시작 간의 긴밀한 결합은 대상 시스템이 응답 시간을 통해 테스트 처리량에 영향을 미칠 수 있음을 의미한다. 
- 더 느린 응답 시간은 더 긴 반복과 더 낮은 새 반복의 도달률을 의미하며 더 빠른 응답 시간의 경우 그 반대도 마찬가지이다. 

- 즉, 대상 시스템이 스트레스를 받고 더 느리게 응답하기 시작하면 폐쇄형 모델 부하 테스트가 "좋은" 상태로 재생되고 대기하므로 반복 기간이 증가하고 새로운 VU반복 도착 속도가 감소한다. 
- 목표가 새로운 VU의 특정 도착 속도 또는 보다 일반 적으로 처리량(예: 초당요청)을 시뮬레이션하는 것인 경우에는 이상적이지 않다. 

## Open model

- 폐쇄형 모델과 비교하여 개방형 모델은 실제 반복 기간에서 VU 반복을 분리한다. 
- 대상 시스템의 응답 시간은 더 이상 대상 시스템에 가해지는 로드에 영향을 미치지 않는다. 

- 이 문제를 해결하기 위해 우리는 새로운 VU 반복의 시작을 반복 기간과 대상 시스템의 응답 시간의 영향으로 부터 분리하는 개방형 모델을 사용한다. 

